//var MINIFY = process.env.MINIFY;
//if (!MINIFY) throw "Please specify a build to minifiy, e.g. MINIFY=web ..."

var config = require('./config.web');
var webpack = require('webpack');
var objectAssign = require('object-assign-deep');
var CompressionPlugin = require("compression-webpack-plugin");

config = objectAssign(config, {
      output: {
              filename: "[name]/[name].min.js"
            },
      plugins: [
				new webpack.optimize.UglifyJsPlugin(),
				new CompressionPlugin({
				asset: "[path].gz[query]",
				algorithm: "gzip",
				test: /\.min.js$/,
				threshold: 10240,
				minRatio: 0.8
				})
            ]
});

module.exports = config;
